{
  "permissions": {
    "allow": [
      "Bash(sqlite3:*)",
      "Bash(mkdir:*)",
      "Bash(ls:*)",
      "Bash(opam list:*)",
      "Bash(grep:*)",
      "Bash(mv:*)",
      "Bash(cp:*)",
      "Bash(find:*)",
      "Bash(DATABASE_PATH=org-206-sandbox.db dune exec scheduler 2 >& 1)",
      "Bash(DATABASE_PATH=org-206-sandbox.db dune exec scheduler 2>&1)",
      "Bash(DATABASE_PATH=org-206-sandbox.db dune exec high_performance_scheduler org-206-sandbox.db)",
      "Bash(chmod:*)",
      "Bash(./test_campaigns.sh:*)",
      "Bash(./comprehensive_test_scheduler.sh:*)",
      "Bash(grep -A 15 \"let get_all_contacts\" lib/db/database.ml)",
      "Bash(# Create a very simple campaign test\nsqlite3 test_simple_campaign.db < migrations/003_add_campaign_tables.sql\n\nsqlite3 test_simple_campaign.db \"\n-- Create minimal contacts table\nCREATE TABLE contacts (\n    id INTEGER PRIMARY KEY,\n    email TEXT NOT NULL,\n    birth_date TEXT,\n    effective_date TEXT,\n    state TEXT,\n    zip_code TEXT,\n    current_carrier TEXT\n);\n\nCREATE TABLE email_schedules (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    contact_id INTEGER NOT NULL,\n    email_type TEXT NOT NULL,\n    scheduled_send_date TEXT NOT NULL,\n    scheduled_send_time TEXT NOT NULL DEFAULT '08:30:00',\n    status TEXT NOT NULL DEFAULT 'scheduled',\n    skip_reason TEXT,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    updated_at TEXT NOT NULL DEFAULT (datetime('now')),\n    batch_id TEXT,\n    event_year INTEGER,\n    event_month INTEGER,\n    event_day INTEGER,\n    catchup_note TEXT,\n    actual_send_datetime TEXT,\n    FOREIGN KEY (contact_id) REFERENCES contacts (id) ON DELETE CASCADE\n);\n\n-- Create required indexes\nCREATE UNIQUE INDEX idx_email_schedules_unique ON email_schedules (contact_id, email_type, scheduled_send_date);\nCREATE INDEX idx_email_schedules_status ON email_schedules (status);\nCREATE INDEX idx_email_schedules_date ON email_schedules (scheduled_send_date);\n\n-- Insert a single test contact (65+)\nINSERT INTO contacts (id, email, birth_date, state) VALUES\n    (1, 'test@example.com', '1955-01-01', 'TX');\n\n-- Create a simple test campaign\nINSERT INTO campaign_types (\n    name, respect_exclusion_windows, enable_followups, days_before_event,\n    target_all_contacts, priority, active, spread_evenly, skip_failed_underwriting\n) VALUES (\n    'test_campaign', 0, 0, 0, 1, 50, 1, 0, 0\n);\n\n-- Create campaign instance\nINSERT INTO campaign_instances (\n    campaign_type, instance_name,\n    active_start_date, active_end_date,\n    spread_start_date, spread_end_date\n) VALUES (\n    'test_campaign', 'Test Campaign June 2025',\n    '2025-06-01', '2025-06-30',\n    '2025-06-01', '2025-06-30'\n);\n\n-- Enroll the contact in the campaign\nINSERT INTO contact_campaigns (contact_id, campaign_instance_id, status)\nVALUES (1, 2, 'active');\n\"\n\necho \"Simple test campaign database created. Running scheduler...\"\nDATABASE_PATH=test_simple_campaign.db dune exec high_performance_scheduler test_simple_campaign.db)",
      "Bash(DATABASE_PATH=test_simple_campaign.db dune exec:*)"
    ],
    "deny": []
  }
}